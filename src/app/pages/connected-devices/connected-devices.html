<div class="mb-2 text-blue-500 text-lg cursor-pointer hover:underline">
    <a (click)="toBack()">
        <span class="pi pi-arrow-circle-left"></span> Voltar
    </a>
</div>
<div class="flex flex-row justify-between items-center mb-3">
    <div>
        <div class="text-3xl font-extrabold">Dispositivos Conectados</div>
        <div class="font-normal">Total de dispositivos: {{totalDevices}}</div>
        @if(isLoading) {
            <p class="text-gray-500 mb-2">Atualizando...</p>
        }
    </div>
    <p-button label="Exportar Excel" (onClick)="exportCSV()" />
</div>
<p-card>
    <p-table #dt2 [value]="devices" dataKey="id" [paginator]="true"
        [globalFilterFields]="['macAddress', 'ipAddress']" [rows]="10"
        [rowsPerPageOptions]="[10, 20, 50, 100, 200, 500, 10000]" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template #caption>
            <div class="flex">
                <p-iconfield iconPosition="left" class="ml-auto">
                    <p-inputicon>
                        <i class="pi pi-search"></i>
                    </p-inputicon>
                    <input pInputText type="text" (input)="dt2.filterGlobal(getTargetValue($event), 'contains')"
                        placeholder="Pesquisar" />
                </p-iconfield>
            </div>
        </ng-template>
        <ng-template #header>
            <tr>
                <th pSortableColumn="type" style="width:20%">
                    <div class="font-extrabold">Tipo <p-sortIcon field="type" /></div>
                </th>
                <th pSortableColumn="" style="width:20%">
                    <div class="font-extrabold">Hostname <p-sortIcon field="" /></div>
                </th>
                <th pSortableColumn="macAddress" style="width:20%">
                    <div class="font-extrabold">Endereço MAC <p-sortIcon field="macAddress" /></div>
                </th>
                <th pSortableColumn="ipAddress" style="width:20%">
                    <div class="font-extrabold">Endereço IP <p-sortIcon field="ipAddress" /></div>
                </th>
            </tr>
        </ng-template>
        <ng-template #body let-device>
            <tr>
                <td>{{ device.type }}</td>
                <td>{{ device.hostname }}</td>
                <td>{{ device.macAddress }}</td>
                <td>{{ device.ipAddress }}</td>
            </tr>
        </ng-template>
        <ng-template #emptymessage>
            <tr>
                <td colspan="6">
                    <div class="text-center text-red-400">
                        Não há dados disponíveis.
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</p-card>