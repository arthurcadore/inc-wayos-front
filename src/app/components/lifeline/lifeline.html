<div class="bg-lifeline" style="position: relative;">
    @if (isLoading) {
    <div class="text-center text-gray-500 text-sm" style="width: 100%;">Carregando dados...</div>
    } @else {
    @for (item of data; track item) {
    <div class="lifeline-item event-{{item.typeName.toLowerCase()}}" [class.hovered]="hoveredItem === item"
        (mouseenter)="onItemHover($event, item)" (mouseleave)="onItemLeave()"></div>
    } @empty {
    <div class="text-center text-gray-500 text-sm" style="width: 100%;">Sem dados dispon√≠veis (linha de vida)</div>
    }
    }

    @if (hoveredItem) {
    <div class="lifeline-popup" [style.left.px]="popupPosition.x">
        <div class="popup-content">
            <div class="popup-header">{{ hoveredItem.statusName }}</div>
            <div class="popup-time">{{ hoveredItem.startAt | date: 'dd/MM/yyyy HH:mm:ss' }}</div>
            <div class="popup-divider"></div>
            <div class="popup-metrics">
                <div class="flex flex-row justify-between">
                    <div class="popup-metric">
                        <span class="metric-label">CPU:</span>
                        <span class="metric-value">{{ hoveredItem.cpu }}</span>
                    </div>
                    <div class="popup-metric">
                        <span class="metric-label">MEM:</span>
                        <span class="metric-value">{{ hoveredItem.mem }}</span>
                    </div>
                </div>
                <div class="popup-metric">
                    <span class="metric-label">Up speed:</span>
                    <span class="metric-value">{{ hoveredItem.up }}</span>
                </div>
                <div class="popup-metric">
                    <span class="metric-label">Down speed:</span>
                    <span class="metric-value">{{ hoveredItem.down }}</span>
                </div>
            </div>
        </div>
        <div class="popup-arrow"></div>
    </div>
    }
</div>